{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
  <div class="h2">Données du device</div>
  <div class="h2 flex-row-reverse">{{ device.name }} ({{ device.device_id }})</div>
</div>

<div class="values-box">
  <h4>Derniers index reçus</h4>
  <div class="table-responsive">
    <table class="table table-striped table-sm text-center">
      <tr>
        <th width="50%">Date et heure de réception</th>
        <th width="25%">Index {{ device.tx_pulse_n1 }}</th>
        <th width="25%">Index {{ device.tx_pulse_n2 }}</th>
      </tr>
      {% for index, item in df_raw.iterrows() %}
      <tr>
        <td>{{ index }}</td>
        <td>{{ '{0:,d}'.format(item.v1 | round | int).replace(',', ' ') }}</td>
        <td>{{ '{0:,d}'.format(item.v2 | round | int).replace(',', ' ') }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>

<div class="values-box">
  <h4>Données journalières (derniers 7 jours)</h4>
  <div class="table-responsive">
    <table class="table table-striped table-sm text-center">
      <tr>
        <th width="50%">Journée</th>
        <th width="25%">Volume {{ device.tx_pulse_n1 }}</th>
        <th width="25%">Volume {{ device.tx_pulse_n2 }}</th>
      </tr>
      {% for index, item in df_j.iterrows() %}
      <tr>
        <td>{{ index }}</td>
        <td>{{ '{0:,d}'.format(item.v1 | round | int).replace(',', ' ') }}</td>
        <td>{{ '{0:,d}'.format(item.v2 | round | int).replace(',', ' ') }}</td>
      </tr>
      {% endfor %}
      </table>
  </div>
</div>

<div class="values-box">
  <h4>Données horaires (dernières 24h)</h4>
  <div class="table-responsive">
    <table class="table table-striped table-sm text-center">
      <tr>
        <th width="50%">Heure</th>
        <th width="25%">Volume {{ device.tx_pulse_n1 }}</th>
        <th width="25%">Volume {{ device.tx_pulse_n2 }}</th>
      </tr>
      {% for index, item in df_h.iterrows() %}
      <tr>
        <td>{{ index }}</td>
        <td>{{ '{0:,d}'.format(item.v1 | round | int).replace(',', ' ') }}</td>
        <td>{{ '{0:,d}'.format(item.v2 | round | int).replace(',', ' ') }}</td>
      </tr>
      {% endfor %}
      </table>
  </div>
</div>
{% endblock %}
